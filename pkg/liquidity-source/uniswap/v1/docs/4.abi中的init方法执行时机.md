在Go语言中，`init()` 方法是一个特殊的函数，让我来详细解释它的执行时机：

## 1. **init()方法的执行时机**

### 自动执行
`init()` 方法会在以下时机**自动执行**：

1. **包被导入时**：当其他代码 `import` 这个包时
2. **程序启动时**：在 `main()` 函数执行之前
3. **只执行一次**：每个包的 `init()` 函数只会执行一次

### 执行顺序
```go
// 执行顺序：
1. 导入的包的init()函数
2. 当前包的init()函数  
3. main()函数
```

## 2. **在UniswapV1包中的具体执行**

### 触发时机
```go
// 当其他代码导入这个包时：
import "github.com/KyberNetwork/kyberswap-dex-lib/pkg/liquidity-source/uniswap/v1"

// 此时会自动执行：
func init() {
    // 初始化ABI对象
    builder := []struct {
        ABI  *abi.ABI
        data []byte
    }{
        {&erc20ABI, erc20ABIJson},
        {&uniswapExchangeABI, exchangeABIJson},
        {&uniswapFactoryABI, factoryABIJson},
        {&multicallABI, multicallABIJson},  // 这里会解析multicall.json
    }

    for _, b := range builder {
        var err error
        *b.ABI, err = abi.JSON(bytes.NewReader(b.data))
        if err != nil {
            panic(err)  // 如果解析失败会panic
        }
    }
}
```

## 3. **实际使用场景**

### 在pool_tracker.go中的使用
```go
// 当创建PoolTracker时，multicallABI已经被初始化了
func (d *PoolTracker) getReserves(...) {
    // 这里可以直接使用multicallABI，因为init()已经执行过了
    req.AddCall(&ethrpc.Call{
        ABI:    multicallABI,  // 这个变量已经在init()中被初始化
        Target: d.config.MulticallContractAddress,
        Method: multicallGetEthBalanceMethod,
        Params: []interface{}{common.HexToAddress(poolAddress)},
    }, []interface{}{&reserves[i]})
}
```

## 4. **为什么使用init()方法**

### 优势：
1. **自动初始化**：不需要手动调用初始化函数
2. **确保执行**：在包被使用时，ABI已经被正确解析
3. **错误处理**：如果ABI解析失败，程序会立即panic，避免运行时错误
4. **性能优化**：只在程序启动时解析一次，避免重复解析

### 替代方案对比：
```go
// 不使用init()的话，需要手动初始化：
var multicallABI abi.ABI

func InitABIs() error {
    var err error
    multicallABI, err = abi.JSON(bytes.NewReader(multicallABIJson))
    if err != nil {
        return err
    }
    return nil
}

// 使用时需要先调用：
err := InitABIs()
if err != nil {
    // 处理错误
}
```

## 5. **执行时机示例**

```go
// 假设有这样的调用链：
package main

import (
    "github.com/KyberNetwork/kyberswap-dex-lib/pkg/liquidity-source/uniswap/v1"
)

func main() {
    // 此时uniswapv1包的init()已经执行过了
    tracker, err := uniswapv1.NewPoolTracker(config, client)
    // multicallABI等变量已经被正确初始化
}
```

## 6. **注意事项**

### 错误处理
```go
func init() {
    // 如果ABI解析失败，会panic
    *b.ABI, err = abi.JSON(bytes.NewReader(b.data))
    if err != nil {
        panic(err)  // 程序会立即停止
    }
}
```

### 依赖关系
- `init()` 函数不能有参数
- `init()` 函数不能被其他函数调用
- 多个 `init()` 函数按声明顺序执行

## 总结

`init()` 方法会在**包被导入时自动执行**，确保在包被使用之前，所有的ABI对象都已经被正确解析和初始化。这种设计模式在Go语言中很常见，用于包的初始化工作。